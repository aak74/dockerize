# Заготовка для докеризации проектов

## Общая информация
Докеризация удобна при разработке проекта. Имеет смысл даже в случае, когда на проде не будет использоваться докер.

- Почта перехватывается и ее можно проверять по [адресу](http://localhost:8025)
- Документацию разрабатывается при старте проекта размещается в папке `doc`
- Может быть доступна по [адресу](http://localhost/ddoc/)

## Докеризация проекта

### Полная
- Переместите весь код в папку `src/app`
- Отредактируйте переменные `MYSQL_DUMP`, `RSYNC_ROOT` в `Makefile`
- `git add --all`
- `git commit -m "dockerized"`
- `git push origin master`

### Использование докера без преобразования проекта
- Переместите репозиторий в папку `src/app` вместе с папкой `.git`
- Отредактируйте переменные `MYSQL_DUMP`, `RSYNC_ROOT` в `Makefile`

## Начало работы с проектом
- Иницализация 
    ```bash
    make init
    ```
- Измените подключение к БД в файле `src/app/bitrix/.settings.php`. Правильные значения прописаны в файле `.env`. Обычно это:
    ```php
    'host' => 'mysql',
    'database' => 'db',
    'login' => 'bitrix',
    'password' => '123',
    ```
- Запуск контейнеров 
    ```bash
    make up
    ```
- Восстановление БД
    ```bash
    make restore-mysql
    ```
- Если дамп БД доступен на удаленном сервере, то ее можно скачать и развернуть в докере:
    ```bash
    make restore-first
    ```
- Папки bitrix и upload с удаленного сервера подтягиваются командой:
    ```bash
    make rsync
    ```
